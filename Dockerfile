FROM maven:3-jdk-8-alpine

RUN mkdir -p /usr/src/equifax

ADD ./pom.xml /usr/src/equifax/pom.xml
ADD ./src /usr/src/equifax/src
ADD ./docker/entry-point.sh /equifax/entry-point.sh
ADD ./SSNs.tsv /equifax/SSNs.tsv


RUN chmod +x /equifax/entry-point.sh && \
	sync && \
	cd /usr/src/equifax && \
	mvn package && \
	cp /usr/src/equifax/target/*.jar /equifax/equifax-app.jar && \
	rm -Rf /usr/src/equifax

WORKDIR /equifax

ENTRYPOINT ["./entry-point.sh"]

EXPOSE 8080
